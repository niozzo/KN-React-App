# Story 1.4: Post-Login Loading Indicator Overlay

## Status
Draft

## Story
**As an** attendee,  
**I want** a clear loading indicator that overlays the screen after I enter my access code,  
**so that** I understand the app is downloading my personalized conference data and I don't think the app is frozen or broken.

## Story Context

**Existing System Integration:**
- Integrates with: Authentication system and data synchronization service
- Technology: React + TypeScript + Material Design components
- Follows pattern: Existing loading states and overlay patterns in the app
- Touch points: AuthContext login flow, PWADataSyncService.syncAllData(), LoginPage component

## Acceptance Criteria

**Functional Requirements:**

1. **Loading Overlay Display**: A full-screen overlay appears immediately after access code validation succeeds and before data sync begins
2. **Progress Indication**: The overlay shows a clear loading spinner with descriptive text about what's happening
3. **Data Sync Progress**: The overlay displays progress as each data table is being synchronized (attendees, sponsors, agenda_items, etc.)
4. **Completion Transition**: The overlay smoothly fades out once all data synchronization is complete and the user is redirected to the main app

**Integration Requirements:**

5. **Existing Authentication Flow**: The loading overlay integrates seamlessly with the existing AuthContext login process
6. **Data Sync Integration**: The overlay hooks into PWADataSyncService.syncAllData() to show real-time progress
7. **Material Design Consistency**: The overlay follows existing Material Design patterns and Apax KnowledgeNow 2025 branding
8. **Existing Loading States**: The new overlay replaces the simple loading spinner in LoginPage without breaking existing functionality

**Quality Requirements:**

9. **Performance**: The overlay appears within 100ms of successful access code validation
10. **Accessibility**: The overlay includes proper ARIA labels and is keyboard accessible
11. **Error Handling**: If data sync fails, the overlay shows an appropriate error message with retry option
12. **Mobile Responsive**: The overlay works properly on all device sizes and orientations

## Technical Notes

- **Integration Approach**: Extend AuthContext to emit loading progress events that the overlay can subscribe to
- **Existing Pattern Reference**: Follow the existing loading pattern in AuthContext.withAuth HOC but make it more comprehensive
- **Key Constraints**: Must not block the authentication process or interfere with data synchronization
- **Data Sync Tables**: Show progress for all 8 tables: attendees, sponsors, seat_assignments, agenda_items, dining_options, hotels, seating_configurations, user_profiles

## Definition of Done

- [ ] Loading overlay appears immediately after successful access code validation
- [ ] Overlay shows progress for each data table being synchronized
- [ ] Overlay integrates with existing AuthContext and PWADataSyncService
- [ ] Material Design styling matches Apax KnowledgeNow 2025 branding
- [ ] Overlay is fully accessible with proper ARIA labels
- [ ] Error handling for failed data synchronization
- [ ] Mobile responsive design works on all devices
- [ ] Existing login functionality remains unchanged
- [ ] Unit tests cover overlay display, progress updates, and error states
- [ ] Integration tests verify overlay works with complete authentication flow

## User Experience Flow

1. **User enters 6-digit access code** → Code validates successfully
2. **Loading overlay appears** → Shows "Preparing your conference experience..." with spinner
3. **Data sync begins** → Overlay shows progress: "Syncing attendees... (1/8)"
4. **Progress updates** → "Syncing agenda items... (3/8)", "Syncing sponsors... (5/8)", etc.
5. **Sync completes** → "Almost ready..." with completion checkmark
6. **Overlay fades out** → User sees main app dashboard

## Technical Implementation Notes

- **Component**: Create `PostLoginLoadingOverlay` component
- **State Management**: Extend AuthContext to track sync progress
- **Progress Tracking**: Hook into PWADataSyncService to emit progress events
- **Styling**: Use Material Design components with Apax brand colors
- **Animation**: Smooth fade-in/fade-out transitions with progress bar animation

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2024-12-19 | 1.0 | Initial story creation | Sarah (PO) |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used
*To be filled by dev agent*

### Debug Log References
*To be filled by dev agent*

### Completion Notes List
*To be filled by dev agent*

### File List
*To be filled by dev agent*

## QA Results
*Results from QA Agent review will be populated here*
