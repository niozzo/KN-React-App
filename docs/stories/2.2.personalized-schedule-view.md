# Story 2.2: Personalized Schedule View

## Status
Draft

## Story
**As an** attendee,  
**I want** to view my combined schedule (general + breakouts + dinner + seat assignments),  
**so that** I have a complete view of my conference experience.

## Acceptance Criteria
1. Combines general agenda with identity-linked assignments from Supabase
2. Indicates assigned seat/table; supports dynamic timing updates from admin
3. **Simple agenda view** - No filtering controls; clean, straightforward schedule display
4. **Card-based layout** - Sessions grouped under day headers as cohesive visual units
5. **Consistent content positioning** - Status (left) and time (right) in header; title, location, speaker details below
6. **Day header design** - Purple headers that attach to session cards below (rounded top, flat bottom)
7. **Seat visibility** - White background for seat info in current session cards for better contrast
8. **Progressive disclosure** for seat maps and details
9. **TDD**: All schedule view components have comprehensive unit tests (80% line coverage)
10. **TDD**: Integration tests for data fetching, filtering, and user interactions (70% branch coverage)
11. **TDD**: PWA offline functionality testing for cached schedule data
12. **TDD**: Real-time update testing for dynamic timing and seat assignments

## Tasks / Subtasks
- [ ] Task 1: Create schedule data integration (AC: 1)
  - [ ] Implement data fetching from Supabase
  - [ ] Combine general agenda with user assignments
  - [ ] Handle data synchronization
  - [ ] Add error handling for data failures
- [ ] Task 2: Implement seat assignment display (AC: 2)
  - [ ] Add seat/table indicators to schedule items
  - [ ] Implement dynamic timing updates
  - [ ] Add admin update integration
  - [ ] Handle missing seat assignments
- [ ] Task 3: Implement card-based layout (AC: 4, 5, 6)
  - [ ] Create day header components with purple styling
  - [ ] Group sessions under day headers as cohesive cards
  - [ ] Implement sticky header behavior
  - [ ] Add proper card styling and shadows
- [ ] Task 4: Ensure consistent content positioning (AC: 5)
  - [ ] Implement header layout with status left, time right
  - [ ] Position title, location, speaker details consistently
  - [ ] Add seat information at bottom of relevant sessions
  - [ ] Ensure responsive behavior maintains layout
- [ ] Task 5: Implement seat visibility improvements (AC: 7)
  - [ ] Add white background for seat info in current sessions
  - [ ] Implement proper contrast for seat assignments
  - [ ] Add border styling for seat information boxes
- [ ] Task 6: Add progressive disclosure (AC: 8)
  - [ ] Implement expandable session details
  - [ ] Add seat map integration
  - [ ] Create detail modal/page
  - [ ] Add navigation between details
- [ ] Task 7: Implement TDD for schedule view system (AC: 9-12)
  - [ ] Write unit tests for schedule components and data integration (80% line coverage)
  - [ ] Write integration tests for data fetching, filtering, and user interactions (70% branch coverage)
  - [ ] Write PWA offline tests for cached schedule data and revalidation
  - [ ] Write real-time update tests for dynamic timing and seat assignments
  - [ ] Validate test coverage meets all thresholds
  - [ ] Update test documentation with Given-When-Then patterns

## Dev Notes
### Project Context
The personalized schedule view provides attendees with a comprehensive view of their conference experience, combining general agenda items with their specific assignments and seat information.

### Technical Requirements
- **Data Source**: Supabase with real-time updates
- **Performance**: Fast loading and smooth scrolling
- **Responsive**: Mobile-optimized interface
- **Accessibility**: Screen reader support

### Key Features
- Combined general and personal agenda
- Seat assignment indicators
- **Simple agenda view** without filtering complexity
- **Card-based layout** with day headers
- **Consistent content positioning** matching home page
- Sticky navigation headers
- Progressive detail disclosure

### UX Design Requirements
- **Layout Consistency**: Status badge (left) and time (right) in same line header
- **Time Positioning**: Always in top-right corner of each session card
- **Card Grouping**: Sessions grouped under day headers as single visual units
- **Day Header Design**: Purple headers with rounded top, flat bottom corners
- **Seat Visibility**: White background for seat info in current session cards
- **No Left Borders**: Clean card design without heavy purple edge borders
- **Responsive Behavior**: Maintains layout integrity across screen sizes
- **Content Hierarchy**: Title, location, speaker info in consistent positions

### Testing Standards
- **Test Framework**: Vitest + React Testing Library (TDD infrastructure established)
- **Test Location**: `src/__tests__/components/schedule/`
- **Coverage**: 80% line, 85% function, 70% branch coverage
- **PWA Testing**: Offline data availability and revalidation
- **Real-time Testing**: Dynamic timing updates and seat assignment changes
- **Integration Testing**: Data fetching and user interaction flows
- **Test Pattern**: Given-When-Then for all schedule view scenarios

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2024-12-19 | 1.0 | Initial story creation | Sarah (PO) |
| 2024-12-19 | 1.1 | Updated with card-based layout, consistent positioning, and UX design requirements | Sarah (PO) |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

## QA Results
*Results from QA Agent review will be populated here*
