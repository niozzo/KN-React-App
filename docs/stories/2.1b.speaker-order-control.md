# Story 2.1b: Speaker Order Control Enhancement

**Story ID:** 2.1b  
**Title:** Speaker Order Control for Agenda Items  
**Epic:** Speaker Management (Epic 2)  
**Status:** Draft  
**Story Points:** 8  
**Priority:** High  

## Story

**As a** conference administrator  
**I want to** control the order of speakers assigned to agenda items  
**So that** I can properly sequence presentations and ensure speakers appear in the correct order throughout the application  

## Context

Currently, speakers can be assigned to agenda items through the admin panel, but there's no way to control the order in which they appear. This enhancement will add drag-and-drop functionality to reorder speakers, with the order being consistently displayed across both the admin panel and the main application.

## Acceptance Criteria

### Primary Functionality
- [ ] **AC1:** Admin can reorder speakers using drag-and-drop interface
- [ ] **AC2:** Speaker order is saved and persisted per agenda item
- [ ] **AC3:** Order is displayed consistently in both admin panel and main application
- [ ] **AC4:** Order is maintained when speakers are added or removed

### User Experience
- [ ] **AC5:** Drag-and-drop works on desktop browsers
- [ ] **AC6:** Mobile-friendly alternative (up/down arrows) for touch devices
- [ ] **AC7:** Visual feedback during drag operations
- [ ] **AC8:** Order numbers are clearly displayed (1, 2, 3, etc.)

### Data Integrity
- [ ] **AC9:** Order is preserved across page refreshes
- [ ] **AC10:** Order is maintained during data synchronization
- [ ] **AC11:** Order updates are reflected immediately in all views

## Technical Notes

### Database Schema
- Add `display_order` field to `speaker_assignments` table
- Use integer values for ordering (1, 2, 3, etc.)
- Handle reordering logic when speakers are added/removed

### UI Components
- Implement drag-and-drop for desktop
- Implement up/down arrow controls for mobile
- Add visual order indicators
- Ensure accessibility compliance

### Data Flow
- Admin panel: Drag to reorder → Update database → Refresh local cache
- Main app: Read order from cache → Display in sequence
- Sync: Ensure order is maintained during background sync

## Definition of Done

- [ ] All acceptance criteria met
- [ ] Drag-and-drop works on desktop
- [ ] Mobile alternative works on touch devices
- [ ] Order persists across page refreshes
- [ ] Order displays consistently in admin and main app
- [ ] Unit tests for ordering logic
- [ ] Integration tests for data persistence
- [ ] E2E tests for drag-and-drop functionality
- [ ] Accessibility testing completed
- [ ] Code review approved
- [ ] Documentation updated

## Dependencies

- **Depends on:** Story 2.1a (Speaker Management Admin Page)
- **Blocks:** Future speaker-related enhancements
- **Related:** Agenda display components in main application

## Risk Assessment

**Low Risk:**
- Well-defined requirements
- Clear technical approach
- Building on existing functionality

**Mitigation:**
- Test drag-and-drop on various devices
- Ensure graceful fallback for unsupported browsers
- Validate data integrity during reordering

## Story Points Justification

**8 Points** - Medium complexity
- UI/UX implementation (drag-and-drop, mobile alternative)
- Database schema changes
- Data synchronization updates
- Cross-component integration
- Testing across multiple devices

## Dev Agent Record

### Tasks
- [ ] **Task 1:** Update database schema for speaker ordering
- [ ] **Task 2:** Implement drag-and-drop UI component
- [ ] **Task 3:** Implement mobile-friendly ordering controls
- [ ] **Task 4:** Update admin service for order management
- [ ] **Task 5:** Update main app to display speakers in order
- [ ] **Task 6:** Add comprehensive testing
- [ ] **Task 7:** Update documentation

### Debug Log
*To be filled during development*

### Completion Notes
*To be filled upon completion*

### File List
*To be updated during development*

### Change Log
*To be updated during development*

## QA Results

*To be filled by QA agent*

## Architect Notes

*To be filled by Architect agent*

## Status
Draft
