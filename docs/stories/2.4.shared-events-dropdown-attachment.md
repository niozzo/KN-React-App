# Story 2.4: Shared Events Dropdown Attachment Fix

## **Story Description**
As a user, I want the shared events dropdown to be visually connected to its button so that it appears as a seamless, attached dropdown rather than a floating element with gaps.

## **Acceptance Criteria**
- [ ] When I click "X Shared Events" button, the dropdown should appear directly connected to the button
- [ ] There should be no visible gap between the button and the dropdown content
- [ ] The visual connection should match the behavior of the "Find People to Meet" search dropdown
- [ ] The dropdown should maintain proper styling and functionality
- [ ] **TDD**: All dropdown components have comprehensive unit tests (80% line coverage)
- [ ] **TDD**: Integration tests for dropdown interactions and visual attachment (70% branch coverage)
- [ ] **TDD**: PWA offline functionality testing for dropdown state persistence
- [ ] **TDD**: Visual regression testing for dropdown attachment and styling

## **Technical Context**
- **Current Status**: Search section dropdown works perfectly, shared events dropdown has gap
- **Root Cause**: CSS specificity and inline style conflicts preventing proper attachment
- **Approaches Tried**: 
  - Negative margins (-1px to -4px)
  - CSS state classes with border radius manipulation
  - Box-shadow overlap techniques
  - Inline styles with forced positioning
  - Using same CSS classes as working search section

## **Technical Notes**
- Search section uses: `search-section search-section-overlap` classes
- Search section CSS: `box-shadow: 0 -1px 0 0 var(--white) !important`
- Shared events currently has: `shared-events-details` with inline box-shadow
- Issue appears to be CSS specificity conflicts or React rendering interference

## **Priority**: Medium
## **Story Points**: 3
## **Dependencies**: None
## **Sprint**: TBD

## **Definition of Done**
- [ ] Shared events dropdown appears seamlessly connected to button
- [ ] No visual gaps between button and dropdown
- [ ] Matches the visual behavior of search section dropdown
- [ ] Code is clean and maintainable
- [ ] No regression in existing functionality

## **Tasks / Subtasks**
- [ ] Task 1: Fix dropdown visual attachment
  - [ ] Analyze CSS specificity conflicts
  - [ ] Apply consistent styling with search section
  - [ ] Test visual attachment across different screen sizes
  - [ ] Verify no visual gaps between button and dropdown
- [ ] Task 2: Implement TDD for dropdown system (AC: 5-8)
  - [ ] Write unit tests for dropdown components and interactions (80% line coverage)
  - [ ] Write integration tests for dropdown visual attachment and functionality (70% branch coverage)
  - [ ] Write PWA offline tests for dropdown state persistence
  - [ ] Write visual regression tests for dropdown attachment and styling
  - [ ] Validate test coverage meets all thresholds
  - [ ] Update test documentation with Given-When-Then patterns

## **Testing Notes**
- Test on multiple screen sizes
- Verify both search and shared events dropdowns work consistently
- Check for any visual artifacts or layout issues

### Testing Standards
- **Test Framework**: Vitest + React Testing Library (TDD infrastructure established)
- **Test Location**: `src/__tests__/components/dropdown/`
- **Coverage**: 80% line, 85% function, 70% branch coverage
- **PWA Testing**: Offline dropdown state persistence and functionality
- **Visual Testing**: Dropdown attachment and styling validation
- **Integration Testing**: Dropdown interactions and user flows
- **Test Pattern**: Given-When-Then for all dropdown interaction scenarios
