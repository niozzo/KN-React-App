# Story 3.1: Attendee Search & Discovery

## Status
Draft

## Story
**As an** attendee,  
**I want** to search and filter other attendees by various criteria,  
**so that** I can find people I want to meet at the conference.

## Acceptance Criteria
1. Search/filter by name, company, role, interests, or free text search of bio
2. Respect discoverability opt-out settings
3. Display attendee profiles with relevant information
4. Integration with sponsor attendee discovery
5. Performance optimized for large attendee lists
6. **NEW**: Progressive reveal search section with collapsible "Find People to Meet" interface
7. **NEW**: Simplified filter system with "Show only people with shared events" toggle
8. **NEW**: Enhanced sort dropdown with integrated labels (Last Name, First Name, Company Name)
9. **NEW**: Sticky tab navigation that remains accessible while scrolling
10. **NEW**: Attached expanded views for seamless UI transitions
11. **TDD**: All search and discovery components have comprehensive unit tests (80% line coverage)
12. **TDD**: Integration tests for search functionality, filtering, and user interactions (70% branch coverage)
13. **TDD**: PWA offline functionality testing for cached attendee data
14. **TDD**: Performance testing for large attendee lists and search optimization

## Tasks / Subtasks
- [ ] Task 1: Implement search functionality (AC: 1)
  - [ ] Create search interface with multiple filters
  - [ ] Implement name-based search
  - [ ] Add company and role filtering
  - [ ] Implement free text bio search
- [ ] Task 2: Add privacy controls (AC: 2)
  - [ ] Implement discoverability opt-out respect
  - [ ] Add privacy filtering
  - [ ] Handle consent management
  - [ ] Add privacy indicators
- [ ] Task 3: Create attendee profiles (AC: 3)
  - [ ] Design profile display components
  - [ ] Add relevant information display
  - [ ] Implement profile navigation
  - [ ] Add contact information display
- [ ] Task 4: Integrate with sponsor discovery (AC: 4)
  - [ ] Connect to sponsor attendee lists
  - [ ] Add sponsor context to profiles
  - [ ] Implement sponsor filtering
  - [ ] Add sponsor badge display
- [ ] Task 5: Optimize performance (AC: 5)
  - [ ] Implement search result pagination
  - [ ] Add search result caching
  - [ ] Optimize database queries
  - [ ] Add loading states and indicators
- [ ] **NEW Task 6: Implement progressive reveal interface (AC: 6)**
  - [ ] Create collapsible "Find People to Meet" section
  - [ ] Implement smooth expand/collapse animations
  - [ ] Add visual attachment for expanded state
  - [ ] Ensure responsive behavior
- [ ] **NEW Task 7: Implement simplified filtering (AC: 7)**
  - [ ] Create "Show only people with shared events" toggle
  - [ ] Implement toggle functionality
  - [ ] Add visual feedback for active state
  - [ ] Ensure performance with large lists
- [ ] **NEW Task 8: Implement enhanced sorting (AC: 8)**
  - [ ] Create dropdown sort interface
  - [ ] Integrate "Sort by" labels into options
  - [ ] Implement sort functionality (Last Name, First Name, Company Name)
  - [ ] Add visual feedback for sort state
- [ ] **NEW Task 9: Implement sticky navigation (AC: 9)**
  - [ ] Create sticky tab navigation
  - [ ] Ensure proper z-index and positioning
  - [ ] Add smooth transitions
  - [ ] Test across different screen sizes
- [ ] **NEW Task 10: Implement attached expanded views (AC: 10)**
  - [ ] Create seamless attachment for expanded sections
  - [ ] Implement visual continuity
  - [ ] Add smooth transitions
  - [ ] Ensure responsive behavior
- [ ] **Task 11: Implement TDD for attendee search system (AC: 11-14)**
  - [ ] Write unit tests for search components, filtering, and sorting (80% line coverage)
  - [ ] Write integration tests for search functionality and user interactions (70% branch coverage)
  - [ ] Write PWA offline tests for cached attendee data and search results
  - [ ] Write performance tests for large attendee lists and search optimization
  - [ ] Validate test coverage meets all thresholds
  - [ ] Update test documentation with Given-When-Then patterns

## Dev Notes
### Project Context
Attendee search and discovery enables networking at the conference by helping attendees find and connect with other participants based on various criteria.

### Technical Requirements
- **Search**: Fast, multi-criteria search
- **Privacy**: Respect user consent settings
- **Performance**: Optimized for large datasets
- **Integration**: Connected to sponsor system

### Mockup References
- **Primary Mockup**: `mockups/meet.html`
- **Search Section**: Lines 741-773 (Progressive reveal "Find People to Meet" section)
- **Filter Controls**: Lines 774-790 (Simplified filter toggle and sort dropdown)
- **Sticky Navigation**: Lines 735-739 (Tab navigation with sticky positioning)
- **Attached Views**: CSS classes `.search-section-header.expanded` and `.search-section` for seamless attachment

### Testing Standards
- **Test Framework**: Vitest + React Testing Library (TDD infrastructure established)
- **Test Location**: `src/__tests__/components/search/`
- **Coverage**: 80% line, 85% function, 70% branch coverage
- **PWA Testing**: Offline attendee data availability and search functionality
- **Performance Testing**: Large attendee lists and search optimization
- **Integration Testing**: Search functionality and user interaction flows
- **Test Pattern**: Given-When-Then for all search and discovery scenarios

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2024-12-19 | 1.0 | Initial story creation | Sarah (PO) |
| 2024-12-19 | 1.1 | Updated with mockup changes: progressive reveal, simplified filtering, enhanced sorting, sticky navigation | Sarah (PO) |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

## QA Results
*Results from QA Agent review will be populated here*
