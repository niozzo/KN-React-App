# Story 6.1: Profile Visibility & Logout

## Status
In Progress

## Story
**As a** user,  
**I want** to control my profile visibility and sign out securely,  
**so that** I have basic privacy controls over my information.

## Acceptance Criteria
1. Profile visibility toggle in Settings (default: visible)
2. Toggle disabled when offline with helpful message
3. Hidden profiles excluded from Bios page and never cached
4. Sign out functionality works (already implemented)
5. Changes sync to application database
6. Database changes via SQL script (similar to agenda_item_metadata pattern)
7. Hidden profiles filtered at cache layer alongside confidential data filtering

## Tasks / Subtasks
- [x] Sign out functionality (already complete)
- [x] Create feature branch
- [x] Create application database table and RLS policies
- [x] Add attendee preferences service methods
- [x] Update cache filtering to exclude hidden profiles
- [x] Implement Settings page toggle with online/offline detection
- [x] Remove unimplemented settings features
- [x] Update story documentation
- [ ] Test complete flow
- [ ] Create PR and merge to main

## Dev Notes
### Project Context
Simplified privacy controls focused on profile visibility and secure logout for basic user privacy needs.

### Technical Requirements
- **Profile Visibility**: Toggle to hide/show profile in Bios page
- **Offline Handling**: Toggle disabled when offline with helpful message
- **Cache Filtering**: Hidden profiles never cached (leverages existing confidential data filtering)
- **Database Integration**: Application database stores preferences with RLS policies

### Implementation Details
- **Database Pattern**: Follows `agenda_item_metadata` pattern - separate table with attendee ID reference
- **Default State**: Profile visible by default (opt-out model)
- **Cache Strategy**: Filter hidden profiles at cache layer alongside confidential data filtering
- **Offline Behavior**: Toggle disabled when offline, show helpful message
- **Fail-Safe**: If preferences can't be loaded, show all profiles (fail open)

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2024-12-19 | 1.0 | Initial story creation | Sarah (PO) |
| 2024-12-19 | 1.1 | Removed networking alerts toggle from notification settings | UX Expert |
| 2025-01-27 | 2.0 | Simplified to profile visibility toggle and logout functionality | Architect |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

## QA Results
*Results from QA Agent review will be populated here*
